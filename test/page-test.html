<!doctype html>
<html>
<head>
  <title>qowt-page test</title>

  <!-- The order of loading is important here.
  The test frameworks must be loaded before requirejs.-->
  <script src="../bower_components/platform/platform.js" type="text/javascript"></script>
  <script src="../node_modules/chai/chai.js" type="text/javascript"></script>
  <script src="../utils/lodash.min.js" type="text/javascript"></script>

  <!-- Set up our test environment -->
  <script src="./htmlTest.js"></script>

  <script src="../utils/require.min.js" type="text/javascript"></script>
  <script>
    require.config({
      baseUrl: "../"
    });
  </script>

  <!-- Finally load our Polymer element -->
  <link rel="import" href="../elements/page.html">

</head>

<body>
  <!-- Create an instance of my element on which I can assert -->
  <qowt-page></qowt-page>

  <script>
    var assert = chai.assert;

    // The main test loop
    function test_() {
      var page = document.querySelector('qowt-page');
      assert(page instanceof QowtPage, 'element is a QowtPage');

      assertFunctions(page, ['flow', 'unflow', 'isFlowing']);

      // Tell Karma we are done with all our tests so it can report.
      done();
    }

    function assertFunctions(element, funcList) {
      funcList.forEach(function(funcName) {
        assert.isFunction(element[funcName],
            '<qowt-page>.' + funcName);
      });
    }

    whenReady().then(
      test_
    ).catch(function(e) {
      setTimeout(function() {
        throw e;
      },0);
    });

  </script>
</body>
</html>